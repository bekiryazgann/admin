let couponDatatable=$("#couponTable").DataTable({ajax:{url:url+"api/coupons"},columns:[{data:"id",orderable:!1,render:function(t,a,n,e){return'<div class="form-check"> <input class="form-check-input dt-checkboxes" type="checkbox" value="" id="checkbox'+n.id+'" /><label class="form-check-label" for="checkbox'+n.id+'"></label></div>'},checkboxes:{selectAllRender:'<div class="form-check"> <input class="form-check-input" type="checkbox" value="" id="checkboxSelectAll" /><label class="form-check-label" for="checkboxSelectAll"></label></div>'}},{data:"id"},{data:"code",render:function(t,a,n,e){return`<h3><span class="badge badge-light-primary text-center">${t}</span></h3>`}},{data:"name"},{data:"amount"},{data:"total"},{data:"status",orderable:!1,render:function(t,a,n){let e="",o="";return 1===t?(e="Aktif",o="success"):2===t&&(e="Pasif",o="danger"),`<div><span class="badge badge-light-${o} text-center">${e}</span></div>`}},{data:"id",width:"12%",orderable:!1,render:function(t,a,n){return`<div class="d-flex justify-content-between align-items-center mx-auto" style="padding-bottom: 0;padding-right: 0; padding-left: 0;">
                            <button class="btn btn-flat-primary btn-sm couponEdit" data-key="${n.realId}">
                                <i class="far fa-edit" style="font-size: 18px"></i>
                            </button>
                            <button class="btn btn-flat-primary btn-sm couponDelete" type="button" onclick="void(0);" data-key="${n.realId}">
                                <i class="far fa-trash" style="font-size: 18px"></i>
                            </button>
                        </div>`}}],...datatableOptions}),newCoupon=$("#newCoupon"),canvas=$("#canvas"),bsCanvas=new bootstrap.Offcanvas(canvas);newCoupon.on("click",function(){$.post(url+"api/getModal",{modal:"new-coupon"},function(t){canvas.html(t.html),bsCanvas.show(),canvas.on("submit","form",function(t){couponDatatable.draw(),bsCanvas.hide(),t.preventDefault()}),canvas.on("hidden.bs.offcanvas",function(){canvas.html("")})},"json")}),$(document).on("click",".couponDelete",function(t){let a=$(this).data("key");Swal.fire({title:"Emin misiniz?",text:"Bunu geri alamazsınız!",icon:"warning",showCancelButton:!0,confirmButtonText:"Sil",showClass:{popup:"animate__animated animate__fadeIn"},customClass:{confirmButton:"btn btn-outline-primary",cancelButton:"btn btn-outline-danger ms-1"},buttonsStyling:!1}).then(function(t){t.value&&($.post(url+"api/deleteCoupon",{id:a},function(t){t.error?toastr.error(t.error.message,t.error.title,{closeButton:!0,tapToDismiss:!1,rtl:!1}):toastr.success(t.success.message,t.success.title,{closeButton:!0,tapToDismiss:!1,rtl:!1})}),couponDatatable.draw())}),t.preventDefault()}),$(document).on("click",".couponEdit",function(t){var a=$(this).data("key");$.post(url+"api/couponDetail",{id:a},function(t){$.post(url+"api/getModal",{data:t,modal:"edit-coupon"},function(t){canvas.html(t.html),bsCanvas.show(),canvas.on("submit","form",function(t){couponDatatable.draw(),bsCanvas.hide(),t.preventDefault()}),canvas.on("hidden.bs.offcanvas",function(){canvas.html("")})})}),t.preventDefault()});