!function(e){"function"==typeof define&&define.amd?define("picker",["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):"object"==typeof window?window.Picker=e(jQuery):this.Picker=e(jQuery)}(function(h){var o=h(window),m=h(document),r=h(document.documentElement),g=null!=document.documentElement.style.transition;function v(r,t,n,e){var o,d,s,i,u,c;return r?(o=!1,d={id:r.id||"P"+Math.abs(~~(Math.random()*new Date)),handlingOpen:!1},s=n?h.extend(!0,{},n.defaults,e):e||{},i=h.extend({},v.klasses(),s.klass),u=h(r),c=(e=function(){return this.start()}).prototype={constructor:e,$node:u,start:function(){var e;return d&&d.start?c:(d.methods={},d.start=!0,d.open=!1,d.type=r.type,r.autofocus=r==b(),r.readOnly=!s.editable,s.id=r.id=r.id||d.id,"text"!=r.type&&(r.type="text"),c.component=new n(c,s),c.$root=h('<div class="'+i.picker+'" id="'+r.id+'_root" />'),$(c.$root[0],"hidden",!0),c.$holder=h(a()).appendTo(c.$root),l(),s.formatSubmit&&(!0===s.hiddenName?(e=r.name,r.name=""):e=(e=["string"==typeof s.hiddenPrefix?s.hiddenPrefix:"","string"==typeof s.hiddenSuffix?s.hiddenSuffix:"_submit"])[0]+r.name+e[1],c._hidden=h('<input type=hidden name="'+e+'"'+(u.data("value")||r.value?' value="'+c.get("select",s.formatSubmit)+'"':"")+">")[0],u.on("change."+d.id,function(){c._hidden.value=r.value?c.get("select",s.formatSubmit):""})),u.data(t,c).addClass(i.input).val(u.data("value")?c.get("select",s.format):r.value).on("focus."+d.id+" click."+d.id,function(e){e.preventDefault(),c.open()}).on("mousedown",function(){d.handlingOpen=!0;var e=function(){setTimeout(function(){h(document).off("mouseup",e),d.handlingOpen=!1},0)};h(document).on("mouseup",e)}),s.editable||u.on("keydown."+d.id,p),$(r,{haspopup:!0,readonly:!1,owns:r.id+"_root"}),s.containerHidden?h(s.containerHidden).append(c._hidden):u.after(c._hidden),s.container?h(s.container).append(c.$root):u.after(c.$root),c.on({start:c.component.onStart,render:c.component.onRender,stop:c.component.onStop,open:c.component.onOpen,close:c.component.onClose,set:c.component.onSet}).on({start:s.onStart,render:s.onRender,stop:s.onStop,open:s.onOpen,close:s.onClose,set:s.onSet}),o=function(e){var t,n="position";e.currentStyle?t=e.currentStyle[n]:window.getComputedStyle&&(t=getComputedStyle(e)[n]);return"fixed"==t}(c.$holder[0]),r.autofocus&&c.open(),c.trigger("start").trigger("render"))},render:function(e){return e?(c.$holder=h(a()),l(),c.$root.html(c.$holder)):c.$root.find("."+i.box).html(c.component.nodes(d.open)),c.trigger("render")},stop:function(){return d.start&&(c.close(),c._hidden&&c._hidden.parentNode.removeChild(c._hidden),c.$root.remove(),u.removeClass(i.input).removeData(t),setTimeout(function(){u.off("."+d.id)},0),r.type=d.type,r.readOnly=!1,c.trigger("stop"),d.methods={},d.start=!1),c},open:function(e){return d.open?c:(u.addClass(i.active),setTimeout(function(){c.$root.addClass(i.opened),$(c.$root[0],"hidden",!1)},0),!1!==e&&(d.open=!0,o&&h("body").css("overflow","hidden").css("padding-right","+="+y()),o&&g?c.$holder.find("."+i.frame).one("transitionend",function(){c.$holder.eq(0).focus()}):setTimeout(function(){c.$holder.eq(0).focus()},0),m.on("click."+d.id+" focusin."+d.id,function(e){var t;d.handlingOpen||(t=_(e,r),e.isSimulated)||t==r||t==document||3==e.which||c.close(t===c.$holder[0])}).on("keydown."+d.id,function(e){var t=e.keyCode,n=c.component.key[t],o=_(e,r);27==t?c.close(!0):o!=c.$holder[0]||!n&&13!=t?h.contains(c.$root[0],o)&&13==t&&(e.preventDefault(),o.click()):(e.preventDefault(),n?v._.trigger(c.component.key.go,c,[v._.trigger(n)]):c.$root.find("."+i.highlighted).hasClass(i.disabled)||(c.set("select",c.component.item.highlight),s.closeOnSelect&&c.close(!0)))})),c.trigger("open"))},close:function(e){return e&&(s.editable?r.focus():(c.$holder.off("focus.toOpen").focus(),setTimeout(function(){c.$holder.on("focus.toOpen",f)},0))),u.removeClass(i.active),setTimeout(function(){c.$root.removeClass(i.opened+" "+i.focused),$(c.$root[0],"hidden",!0)},0),d.open?(d.open=!1,o&&h("body").css("overflow","").css("padding-right","-="+y()),m.off("."+d.id),c.trigger("close")):c},clear:function(e){return c.set("clear",null,e)},set:function(e,t,n){var o,r,i=h.isPlainObject(e),a=i?e:{};if(n=i&&h.isPlainObject(t)?t:n||{},e){for(o in i||(a[e]=t),a)r=a[o],o in c.component.item&&(void 0===r&&(r=null),c.component.set(o,r,n)),"select"!=o&&"clear"!=o||!s.updateInput||u.val("clear"==o?"":c.get(o,s.format)).trigger("change");c.render()}return n.muted?c:c.trigger("set",a)},get:function(e,t){if(null!=d[e=e||"value"])return d[e];if("valueSubmit"==e){if(c._hidden)return c._hidden.value;e="value"}var n;return"value"==e?r.value:e in c.component.item?"string"==typeof t?(n=c.component.get(e))?v._.trigger(c.component.formats.toString,c.component,[t,n]):"":c.component.get(e):void 0},on:function(e,t,n){var o,r,i=h.isPlainObject(e),a=i?e:{};if(e)for(o in i||(a[e]=t),a)r=a[o],d.methods[o=n?"_"+o:o]=d.methods[o]||[],d.methods[o].push(r);return c},off:function(){var e,t=arguments,n=0;for(namesCount=t.length;n<namesCount;n+=1)(e=t[n])in d.methods&&delete d.methods[e];return c},trigger:function(e,t){function n(e){(e=d.methods[e])&&e.map(function(e){v._.trigger(e,c,[t])})}return n("_"+e),n(e),c}},new e):v;function a(){return v._.node("div",v._.node("div",v._.node("div",v._.node("div",c.component.nodes(d.open),i.box),i.wrap),i.frame),i.holder,'tabindex="-1"')}function l(){c.$holder.on({keydown:p,"focus.toOpen":f,blur:function(){u.removeClass(i.target)},focusin:function(e){c.$root.removeClass(i.focused),e.stopPropagation()},"mousedown click":function(e){var t=_(e,r);t!=c.$holder[0]&&(e.stopPropagation(),"mousedown"!=e.type||h(t).is("input, select, textarea, button, option")||(e.preventDefault(),c.$holder.eq(0).focus()))}}).on("click","[data-pick], [data-nav], [data-clear], [data-close]",function(){var e=h(this),t=e.data(),e=e.hasClass(i.navDisabled)||e.hasClass(i.disabled),n=(n=b())&&(n.type||n.href?n:null);(e||n&&!h.contains(c.$root[0],n))&&c.$holder.eq(0).focus(),!e&&t.nav?c.set("highlight",c.component.item.highlight,{nav:t.nav}):!e&&"pick"in t?(c.set("select",t.pick),s.closeOnSelect&&c.close(!0)):t.clear?(c.clear(),s.closeOnClear&&c.close(!0)):t.close&&c.close(!0)})}function f(e){e.stopPropagation(),u.addClass(i.target),c.$root.addClass(i.focused),c.open()}function p(e){var t=e.keyCode,n=/^(8|46)$/.test(t);if(27==t)return c.close(!0),!1;(32==t||n||!d.open&&c.component.key[t])&&(e.preventDefault(),e.stopPropagation(),n?c.clear().close():c.open())}}function y(){if(r.height()<=o.height())return 0;var e=h('<div style="visibility:hidden;width:100px" />').appendTo("body"),t=e[0].offsetWidth;e.css("overflow","scroll");var n=h('<div style="width:100%" />').appendTo(e)[0].offsetWidth;return e.remove(),t-n}function _(e,t){var n=[];return e.path&&(n=e.path),(n=e.originalEvent&&e.originalEvent.path?e.originalEvent.path:n)&&0<n.length?t&&0<=n.indexOf(t)?t:n[0]:e.target}function $(e,t,n){if(h.isPlainObject(t))for(var o in t)i(e,o,t[o]);else i(e,t,n)}function i(e,t,n){e.setAttribute(("role"==t?"":"aria-")+t,n)}function b(){try{return document.activeElement}catch(e){}}return v.klasses=function(e){return{picker:e=e||"picker",opened:e+"--opened",focused:e+"--focused",input:e+"__input",active:e+"__input--active",target:e+"__input--target",holder:e+"__holder",frame:e+"__frame",wrap:e+"__wrap",box:e+"__box"}},v._={group:function(e){for(var t,n="",o=v._.trigger(e.min,e);o<=v._.trigger(e.max,e,[o]);o+=e.i)t=v._.trigger(e.item,e,[o]),n+=v._.node(e.node,t[0],t[1],t[2]);return n},node:function(e,t,n,o){return t?"<"+e+(n=n?' class="'+n+'"':"")+(o=o?" "+o:"")+">"+(t=h.isArray(t)?t.join(""):t)+"</"+e+">":""},lead:function(e){return(e<10?"0":"")+e},trigger:function(e,t,n){return"function"==typeof e?e.apply(t,n||[]):e},digits:function(e){return/\d/.test(e[1])?2:1},isDate:function(e){return-1<{}.toString.call(e).indexOf("Date")&&this.isInteger(e.getDate())},isInteger:function(e){return-1<{}.toString.call(e).indexOf("Number")&&e%1==0},ariaAttr:function(e,t){h.isPlainObject(e)||(e={attribute:t});for(var n in t="",e){var o=("role"==n?"":"aria-")+n,r=e[n];t+=null==r?"":o+'="'+e[n]+'"'}return t}},v.extend=function(o,r){h.fn[o]=function(e,t){var n=this.data(o);return"picker"==e?n:n&&"string"==typeof e?v._.trigger(n[e],n,[t]):this.each(function(){h(this).data(o)||new v(this,o,r,e)})},h.fn[o].defaults=r.defaults},v});