"use strict";$(function(){var a,t=$(".task-due-date"),n=$(".sidebar-todo-modal"),d=$("#form-modal-todo"),e=$(".todo-item-favorite"),o=$(".modal-title"),s=$(".add-todo-item"),l=$(".add-task button"),i=$(".update-todo-item"),r=$(".update-btn"),c=$("#task-desc"),m=$("#task-assigned"),p=$("#task-tag"),h=$(".body-content-overlay"),u=$(".menu-toggle"),v=$(".sidebar-toggle"),g=$(".sidebar-left"),f=$(".sidebar-menu-list"),w=$("#todo-search"),b=$(".sort-asc"),k=$(".sort-desc"),C=$(".todo-task-list"),y=$(".todo-task-list-wrapper"),x=$(".list-group-filters"),T=$(".no-results"),D=100,j="rtl"===$("html").attr("data-textdirection"),M="../../../app-assets/";function S(t){return t.id?'<div class="d-flex align-items-center"><img class="d-block rounded-circle me-50" src="'+$(t.element).data("img")+'" height="26" width="26" alt="'+t.text+'"><p class="mb-0">'+t.text+"</p></div>":t.text}"laravel"===$("body").attr("data-framework")&&(M=$("body").attr("data-asset-path")),$.app.menu.is_touch_device()?(f.css("overflow","scroll"),y.css("overflow","scroll")):(0<f.length&&new PerfectScrollbar(f[0],{theme:"dark"}),0<y.length&&new PerfectScrollbar(y[0],{theme:"dark"})),x.length&&x.find("a").on("click",function(){x.find("a").hasClass("active")&&x.find("a").removeClass("active"),$(this).addClass("active")}),null!==(f=document.getElementById("todo-task-list"))&&dragula([f],{moves:function(t,e,a){return a.classList.contains("drag-icon")}}),u.length&&u.on("click",function(t){g.removeClass("show"),h.removeClass("show")}),v.length&&v.on("click",function(t){t.stopPropagation(),g.toggleClass("show"),h.addClass("show")}),h.length&&h.on("click",function(t){g.removeClass("show"),h.removeClass("show"),$(n).modal("hide")}),m.length&&(m.wrap('<div class="position-relative"></div>'),m.select2({placeholder:"Unassigned",dropdownParent:m.parent(),templateResult:S,templateSelection:S,escapeMarkup:function(t){return t}})),p.length&&(p.wrap('<div class="position-relative"></div>'),p.select2({placeholder:"Select tag"})),e.length&&$(e).on("click",function(){$(this).toggleClass("text-warning")}),t.length&&t.flatpickr({dateFormat:"Y-m-d",defaultDate:"today",onReady:function(t,e,a){a.isMobile&&$(a.mobileInput).attr("step",null)}}),c.length&&new Quill("#task-desc",{bounds:"#task-desc",modules:{formula:!0,syntax:!0,toolbar:".desc-toolbar"},placeholder:"Write Your Description",theme:"snow"}),l.length&&l.on("click",function(t){s.removeClass("d-none"),r.addClass("d-none"),o.text("Add Task"),g.removeClass("show"),h.removeClass("show"),n.find(".new-todo-item-title").val(""),c.find(".ql-editor")[0].innerHTML=""}),d.length&&(d.validate({ignore:".ql-container *",rules:{todoTitleAdd:{required:!0},"task-assigned":{required:!0},"task-due-date":{required:!0}}}),d.on("submit",function(t){var a,e,o,s,l,i;t.preventDefault(),d.valid()&&(D++,t=$("#task-assigned").val(),a="",e={"Phill Buffer":M+"images/portrait/small/avatar-s-3.jpg","Chandler Bing":M+"images/portrait/small/avatar-s-1.jpg","Ross Geller":M+"images/portrait/small/avatar-s-4.jpg","Monica Geller":M+"images/portrait/small/avatar-s-6.jpg","Joey Tribbiani":M+"images/portrait/small/avatar-s-2.jpg","Rachel Green":M+"images/portrait/small/avatar-s-11.jpg"},o=$(".sidebar-todo-modal .new-todo-item-title").val(),s=$(".sidebar-todo-modal .task-due-date").val(),s=new Date(s),s=new Intl.DateTimeFormat("en",{month:"short"}).format(s)+" "+new Intl.DateTimeFormat("en",{day:"2-digit"}).format(s),l=$(".task-tag").val(),i={Team:"primary",Low:"success",Medium:"warning",High:"danger",Update:"info"},$.each(l,function(t,e){a+='<span class="badge rounded-pill badge-light-'+i[e]+' me-50">'+e+"</span>"}),""!=o&&$(C).prepend('<li class="todo-item"><div class="todo-title-wrapper"><div class="todo-title-area">'+feather.icons["more-vertical"].toSvg({class:"drag-icon"})+'<div class="title-wrapper"><div class="form-check"><input type="checkbox" class="form-check-input" id="customCheck'+D+'" /><label class="form-check-label" for="customCheck'+D+'"></label></div><span class="todo-title">'+o+'</span></div></div><div class="todo-item-action"><span class="badge-wrapper me-1">'+a+'</span><small class="text-nowrap text-muted me-1">'+s+'</small><div class="avatar"><img src="'+e[t]+'" alt="'+t+'" height="28" width="28"></div></div></div></li>'),toastr.success("Data Saved","ðŸ’¾ Task Action!",{closeButton:!0,tapToDismiss:!1,rtl:j}),$(n).modal("hide"),h.removeClass("show"))})),y.on("change",".form-check",function(t){var e=$(this).find("input");e.prop("checked")?(e.closest(".todo-item").addClass("completed"),toastr.success("Task Completed","Congratulations!! ðŸŽ‰",{closeButton:!0,tapToDismiss:!1,rtl:j})):e.closest(".todo-item").removeClass("completed")}),y.on("click",".form-check",function(t){t.stopPropagation()}),$(document).on("click",".todo-task-list-wrapper .todo-item",function(t){n.modal("show"),s.addClass("d-none"),r.removeClass("d-none"),$(this).hasClass("completed")?o.html('<button type="button" class="btn btn-sm btn-outline-success complete-todo-item waves-effect waves-float waves-light" data-bs-dismiss="modal">Completed</button>'):o.html('<button type="button" class="btn btn-sm btn-outline-secondary complete-todo-item waves-effect waves-float waves-light" data-bs-dismiss="modal">Mark Complete</button>'),p.val("").trigger("change"),$("#task-desc .ql-editor")[0].innerHTML="Chocolate cake topping bonbon jujubes donut sweet wafer. Marzipan gingerbread powder brownie bear claw. Chocolate bonbon sesame snaps jelly caramels oat cake.",a=$(this).find(".todo-title");var e=$(this).find(".todo-title").html();d.find(".new-todo-item-title").val(e)}),i.length&&i.on("click",function(t){var e=d.valid();t.preventDefault(),e&&(t=d.find(".new-todo-item-title").val(),$(a).text(t),toastr.success("Data Saved","ðŸ’¾ Task Action!",{closeButton:!0,tapToDismiss:!1,rtl:j}),$(n).modal("hide"))}),b.length&&b.on("click",function(){y.find("li").sort(function(t,e){return $(e).find(".todo-title").text().toUpperCase()<$(t).find(".todo-title").text().toUpperCase()?1:-1}).appendTo(C)}),k.length&&k.on("click",function(){y.find("li").sort(function(t,e){return $(e).find(".todo-title").text().toUpperCase()>$(t).find(".todo-title").text().toUpperCase()?1:-1}).appendTo(C)}),w.length&&w.on("keyup",function(){var t=$(this).val().toLowerCase();""!==t?($(".todo-item").filter(function(){$(this).toggle(-1<$(this).text().toLowerCase().indexOf(t))}),0==$(".todo-item:visible").length?$(T).hasClass("show")||$(T).addClass("show"):$(T).removeClass("show")):($(".todo-item").show(),$(T).hasClass("show")&&$(T).removeClass("show"))}),992<$(window).width()&&h.hasClass("show")&&h.removeClass("show")}),$(window).on("resize",function(){992<$(window).width()&&$(".body-content-overlay").hasClass("show")&&($(".sidebar-left").removeClass("show"),$(".body-content-overlay").removeClass("show"),$(".sidebar-todo-modal").modal("hide"))});