!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e=e||self).i18nextBrowserLanguageDetector=o()}(this,function(){"use strict";var e=[],n=e.forEach,i=e.slice;function t(){if(null===o)try{o="undefined"!==window&&null!==window.localStorage,window.localStorage.setItem("i18next.translate.boo","foo"),window.localStorage.removeItem("i18next.translate.boo")}catch(e){o=!1}return o}function a(){if(null===c)try{c="undefined"!==window&&null!==window.sessionStorage,window.sessionStorage.setItem("i18next.translate.boo","foo"),window.sessionStorage.removeItem("i18next.translate.boo")}catch(e){c=!1}return c}for(var r=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,s={name:"cookie",lookup:function(i){var e;return i.lookupCookie&&"undefined"!=typeof document&&(i=function(){for(var e=i.lookupCookie+"=",o=document.cookie.split(";"),t=0;t<o.length;t++){for(var n=o[t];" "===n.charAt(0);)n=n.substring(1,n.length);if(0===n.indexOf(e))return n.substring(e.length,n.length)}return null}())?i:e},cacheUserLanguage:function(e,o){o.lookupCookie&&"undefined"!=typeof document&&function(e,o,t,n,i){i=4<arguments.length&&void 0!==i?i:{path:"/",sameSite:"strict"},t&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+60*t*1e3)),n&&(i.domain=n),document.cookie=function(e,o,t){(t=t||{}).path=t.path||"/";var n=e+"="+encodeURIComponent(o);if(0<t.maxAge){if(e=+t.maxAge,isNaN(e))throw new Error("maxAge should be a Number");n+="; Max-Age="+Math.floor(e)}if(t.domain){if(!r.test(t.domain))throw new TypeError("option domain is invalid");n+="; Domain="+t.domain}if(t.path){if(!r.test(t.path))throw new TypeError("option path is invalid");n+="; Path="+t.path}if(t.expires){if("function"!=typeof t.expires.toUTCString)throw new TypeError("option expires is invalid");n+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(n+="; HttpOnly"),t.secure&&(n+="; Secure"),t.sameSite)switch("string"==typeof t.sameSite?t.sameSite.toLowerCase():t.sameSite){case!0:n+="; SameSite=Strict";break;case"lax":n+="; SameSite=Lax";break;case"strict":n+="; SameSite=Strict";break;case"none":n+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n}(e,encodeURIComponent(o),i)}(o.lookupCookie,e,o.cookieMinutes,o.cookieDomain,o.cookieOptions)}},u={name:"querystring",lookup:function(e){var o;if("undefined"!=typeof window)for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("=");0<i&&t[n].substring(0,i)===e.lookupQuerystring&&(o=t[n].substring(i+1))}return o}},o=null,l={name:"localStorage",lookup:function(e){var o;return e.lookupLocalStorage&&t()&&(e=window.localStorage.getItem(e.lookupLocalStorage))?e:o},cacheUserLanguage:function(e,o){o.lookupLocalStorage&&t()&&window.localStorage.setItem(o.lookupLocalStorage,e)}},c=null,d={name:"sessionStorage",lookup:function(e){var o;return e.lookupSessionStorage&&a()&&(e=window.sessionStorage.getItem(e.lookupSessionStorage))?e:o},cacheUserLanguage:function(e,o){o.lookupSessionStorage&&a()&&window.sessionStorage.setItem(o.lookupSessionStorage,e)}},g={name:"navigator",lookup:function(e){var o=[];if("undefined"!=typeof navigator){if(navigator.languages)for(var t=0;t<navigator.languages.length;t++)o.push(navigator.languages[t]);navigator.userLanguage&&o.push(navigator.userLanguage),navigator.language&&o.push(navigator.language)}return 0<o.length?o:void 0}},p={name:"htmlTag",lookup:function(e){var o;return(e=e.htmlTag||("undefined"!=typeof document?document.documentElement:null))&&"function"==typeof e.getAttribute?e.getAttribute("lang"):o}},f={name:"path",lookup:function(e){var o;if("undefined"!=typeof window){var t=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(t instanceof Array)if("number"==typeof e.lookupFromPathIndex){if("string"!=typeof t[e.lookupFromPathIndex])return;o=t[e.lookupFromPathIndex].replace("/","")}else o=t[0].replace("/","")}return o}},h={name:"subdomain",lookup:function(e){var o,t;return"undefined"!=typeof window&&(t=window.location.href.match(/(?:http[s]*\:\/\/)*(.*?)\.(?=[^\/]*\..{2,5})/gi))instanceof Array?("number"==typeof e.lookupFromSubdomainIndex?t[e.lookupFromSubdomainIndex]:t[0]).replace("http://","").replace("https://","").replace(".",""):o}},m=S.prototype,k=[{key:"init",value:function(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(t){return n.call(i.call(arguments,1),function(e){if(e)for(var o in e)void 0===t[o]&&(t[o]=e[o])}),t}(o,this.options||{},{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"]}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=t,this.addDetector(s),this.addDetector(u),this.addDetector(l),this.addDetector(d),this.addDetector(g),this.addDetector(p),this.addDetector(f),this.addDetector(h)}},{key:"addDetector",value:function(e){this.detectors[e.name]=e}},{key:"detect",value:function(e){var o=this,t=(e=e||this.options.order,[]);return e.forEach(function(e){o.detectors[e]&&(e=(e=o.detectors[e].lookup(o.options))&&"string"==typeof e?[e]:e)&&(t=t.concat(e))}),this.services.languageUtils.getBestMatchFromCodes?t:0<t.length?t[0]:null}},{key:"cacheUserLanguage",value:function(o,e){var t=this;!(e=e||this.options.caches)||this.options.excludeCacheFor&&-1<this.options.excludeCacheFor.indexOf(o)||e.forEach(function(e){t.detectors[e]&&t.detectors[e].cacheUserLanguage(o,t.options)})}}],w=0;w<k.length;w++){var v=k[w];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}function S(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof S))throw new TypeError("Cannot call a class as a function");this.type="languageDetector",this.detectors={},this.init(e,o)}return(e=S).type="languageDetector",e});