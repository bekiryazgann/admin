!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).i18nextXHRBackend=e()}(this,function(){"use strict";var t=[],n=t.forEach,i=t.slice;function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t){return(l="function"==typeof Symbol&&"symbol"===e(Symbol.iterator)?function(t){return e(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":e(t)})(t)}function u(t,e){if(e&&"object"===l(e)){var o,n="",i=encodeURIComponent;for(o in e)n+="&"+i(o)+"="+i(e[o]);if(!n)return t;t=t+(-1!==t.indexOf("?")?"&":"?")+n.slice(1)}return t}function o(t,e,o,n,i){n&&"object"===l(n)&&(i||(n._t=new Date),n=u("",n).slice(1)),e.queryStringParams&&(t=u(t,e.queryStringParams));try{(a=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0")).open(n?"POST":"GET",t,1),e.crossDomain||a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.withCredentials=!!e.withCredentials,n&&a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.overrideMimeType&&a.overrideMimeType("application/json");var a,r=e.customHeaders;if(r="function"==typeof r?r():r)for(var s in r)a.setRequestHeader(s,r[s]);a.onreadystatechange=function(){3<a.readyState&&o&&o(a.responseText,a)},a.send(n)}catch(t){console&&console.log(t)}}for(var a=f.prototype,r=[{key:"init",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.services=t,this.options=function(o){return n.call(i.call(arguments,1),function(t){if(t)for(var e in t)void 0===o[e]&&(o[e]=t[e])}),o}(e,this.options||{},{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:JSON.parse,parsePayload:function(t,e,o){return o=o||"",e in(n={})?Object.defineProperty(n,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[e]=o,n;var n},crossDomain:!1,ajax:o})}},{key:"readMulti",value:function(t,e,o){var n=this.options.loadPath,n=("function"==typeof this.options.loadPath&&(n=this.options.loadPath(t,e)),this.services.interpolator.interpolate(n,{lng:t.join("+"),ns:e.join("+")}));this.loadUrl(n,o)}},{key:"read",value:function(t,e,o){var n=this.options.loadPath,n=("function"==typeof this.options.loadPath&&(n=this.options.loadPath([t],[e])),this.services.interpolator.interpolate(n,{lng:t,ns:e}));this.loadUrl(n,o)}},{key:"loadUrl",value:function(i,a){var r=this;this.options.ajax(i,this.options,function(t,e){if(500<=e.status&&e.status<600)return a("failed loading "+i,!0);if(400<=e.status&&e.status<500)return a("failed loading "+i,!1);var o,n;try{o=r.options.parse(t,i)}catch(t){n="failed parsing "+i+" to json"}if(n)return a(n,!1);a(null,o)})}},{key:"create",value:function(t,e,o,n){var i=this,a=("string"==typeof t&&(t=[t]),this.options.parsePayload(e,o,n));t.forEach(function(t){t=i.services.interpolator.interpolate(i.options.addPath,{lng:t,ns:e}),i.options.ajax(t,i.options,function(t,e){},a)})}}],s=0;s<r.length;s++){var c=r[s];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function f(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(!(this instanceof f))throw new TypeError("Cannot call a class as a function");this.init(t,e),this.type="backend"}return(t=f).type="backend",t});